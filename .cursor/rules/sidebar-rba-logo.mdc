---
description: RBA logo in sidebar – keep CSS containment, safe-area, and CSP compatibility; do not remove or logo will be cut off
globs: **/base.css,**/base*.css,**/templates/base.html,**/views.py
alwaysApply: false
---

# Sidebar RBA logo – do not regress

The RBA logo in the top-left of the dark blue sidebar must stay fully visible and not cut off or overflowing.

## Root cause of past issues

The base template (`templates/base.html`) uses inline `style=""` attributes on the logo `<img>` tag and other sidebar elements. Pages that set a Content-Security-Policy with `style-src 'self'` (without `'unsafe-inline'`) will **strip all inline styles**, causing the logo to render at its natural (large) image size.

**Any CSP that covers pages using `base.html` MUST include `'unsafe-inline'` in `style-src`:**
```
style-src 'self' 'unsafe-inline';
```

## Required CSS (in `core/static/core/css/base.css`)

- **`.sidebar`**: Keep `overflow: hidden`, `padding-top: max(0.75rem, env(safe-area-inset-top, 0))`, and `padding-left: env(safe-area-inset-left, 0)`.
- **`.sidebar-brand`**: Keep `min-width: 0`, `overflow: hidden`, and `flex-shrink: 0`.
- **`.sidebar-brand span`**: Keep `min-width: 0`.
- **`.sidebar-brand-logo`**: Keep fixed size (width/height/max 32px), `min-width: 0`, `object-fit: contain`, `object-position: center`, `flex-shrink: 0`, `display: block`.

Do not remove or relax these rules. After changing base CSS, run `python manage.py collectstatic` and reload the web app so updated CSS is served.
